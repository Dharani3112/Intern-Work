{% extends "base.html" %}

{% block title %}Add New Product - Logo{% endblock %}

{% block content %}
<h2 class="section-title">Add New Product</h2>

<div class="form-container">
    <form method="POST">
        <div class="form-row">
            <div class="form-group">
                <label for="name" class="form-label">Product Name *</label>
                <input type="text" class="form-input" id="name" name="name" required>
            </div>
            <div class="form-group">
                <label for="brand" class="form-label">Brand</label>
                <input type="text" class="form-input" id="brand" name="brand">
            </div>
        </div>

        <div class="form-group">
            <label for="description" class="form-label">Description</label>
            <textarea class="form-input" id="description" name="description" rows="3"></textarea>
        </div>

        <div class="form-group">
            <label for="specifications" class="form-label">Specifications</label>
            <textarea class="form-input" id="specifications" name="specifications" rows="2" 
                      placeholder="e.g., Bluetooth 5.0, 30-hour battery, Water resistant"></textarea>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="price" class="form-label">Price ($) *</label>
                <input type="number" class="form-input" id="price" name="price" 
                       step="0.01" min="0" required>
            </div>
            <div class="form-group">
                <label for="stock" class="form-label">Stock Quantity</label>
                <input type="number" class="form-input" id="stock" name="stock" 
                       min="0" value="0">
            </div>
            <div class="form-group">
                <label for="delivery_date" class="form-label">Delivery Days</label>
                <input type="number" class="form-input" id="delivery_date" name="delivery_date" 
                       min="1" value="7">
            </div>
        </div>        <div class="form-group">
            <label for="category" class="form-label">Category</label>
            <select class="form-input" id="category" name="category" onchange="handleCategoryChange(this)">
                <option value="">Select Category</option>
                {% for category in categories %}
                <option value="{{ category }}">{{ category }}</option>
                {% endfor %}
                <option value="__new_category__">+ Add New Category</option>
            </select>
            <input type="text" class="form-input" id="new_category" name="new_category" 
                   placeholder="Enter new category name" style="display: none; margin-top: 0.5rem;">
            <div class="form-help">
                Select an existing category or choose "Add New Category" to create a new one.
            </div>
        </div>

        <div class="form-group">
            <label for="image_url" class="form-label">Main Image URL</label>
            <input type="url" class="form-input" id="image_url" name="image_url" 
                   placeholder="https://example.com/image.jpg">            <div class="form-help">
                You can use free images from <a href="https://unsplash.com" target="_blank" class="link">Unsplash</a> 
                or <a href="https://pixabay.com" target="_blank" class="link">Pixabay</a>
            </div>
        </div>        <div class="form-actions">
            <a href="{{ url_for('admin_dashboard') }}" class="view-product-btn">Cancel</a>
            <button type="submit" class="add-to-cart-btn">Add Product</button>
        </div>
    </form>
</div>

<script>
function handleCategoryChange(select) {
    const newCategoryInput = document.getElementById('new_category');
    
    if (select.value === '__new_category__') {
        newCategoryInput.style.display = 'block';
        newCategoryInput.required = true;
        newCategoryInput.focus();
        // Clear the category name to prevent submission of '__new_category__'
        select.name = '';
        newCategoryInput.name = 'category';
    } else {
        newCategoryInput.style.display = 'none';
        newCategoryInput.required = false;
        newCategoryInput.value = '';
        select.name = 'category';
        newCategoryInput.name = 'new_category';
    }
}
</script>
{% endblock %}